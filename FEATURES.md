# SwitchEnv 功能说明

## 已实现的功能

### ✅ 核心功能

1. **系统环境变量扫描** 🆕
   - ✅ 启动时自动扫描本机系统环境变量
   - ✅ 首次启动时友好提示
   - ✅ 系统环境变量查看器
   - ✅ 支持搜索和分页
   - ✅ 导入单个或全部系统环境变量

2. **环境配置管理**
   - ✅ 创建环境配置
   - ✅ 编辑环境配置
   - ✅ 删除环境配置
   - ✅ 一键切换环境配置

2. **环境变量管理**
   - ✅ 添加环境变量
   - ✅ 编辑环境变量（变量名和值）
   - ✅ 删除环境变量
   - ✅ 批量管理（表格视图）

3. **快捷模板**
   - ✅ Node.js 开发环境模板
   - ✅ React 应用模板
   - ✅ Vue 应用模板
   - ✅ 数据库连接配置模板
   - ✅ API 配置模板
   - ✅ Redis 缓存配置模板

4. **导入导出**
   - ✅ 导入 JSON 格式配置
   - ✅ 导入 .env 文件
   - ✅ 导出为 JSON 格式
   - ✅ 导出为 .env 格式

5. **数据持久化**
   - ✅ 本地存储配置数据
   - ✅ 自动保存修改
   - ✅ 环境变量写入 .env 文件
   - ✅ 应用环境变量到进程

### 🎨 界面特性

1. **现代化 UI**
   - ✅ 基于 Element Plus 的美观界面
   - ✅ 渐变色标题栏
   - ✅ 响应式布局
   - ✅ 悬停效果和过渡动画

2. **用户体验**
   - ✅ 左侧配置列表 + 右侧变量编辑器布局
   - ✅ 当前激活配置的可视化标识
   - ✅ 空状态提示
   - ✅ 确认对话框（删除操作）
   - ✅ 操作成功/失败消息提示

3. **配置信息展示**
   - ✅ 配置名称和描述
   - ✅ 变量数量统计
   - ✅ 更新时间显示
   - ✅ 激活状态标签

## 技术架构

### 前端
- **框架**: Vue 3 (Composition API)
- **状态管理**: Pinia
- **UI 组件库**: Element Plus
- **语言**: TypeScript
- **构建工具**: Vite

### 后端
- **运行时**: Electron (主进程)
- **文件系统**: Node.js fs 模块
- **进程通信**: IPC (ipcMain/ipcRenderer)

### 项目结构
```
src/
├── main/                          # Electron 主进程
│   ├── index.ts                   # 主进程入口
│   └── services/
│       └── envManager.ts          # 环境变量管理服务
├── preload/                       # 预加载脚本
│   ├── index.ts                   # 暴露 API 给渲染进程
│   └── index.d.ts                 # TypeScript 类型定义
└── renderer/                      # 渲染进程（Vue 应用）
    ├── src/
    │   ├── components/            # Vue 组件
    │   │   ├── ProfileList.vue    # 配置列表组件
    │   │   ├── VariableEditor.vue # 变量编辑器组件
    │   │   ├── ProfileDialog.vue  # 配置对话框
    │   │   └── TemplateDialog.vue # 模板选择对话框
    │   ├── stores/                # Pinia 状态管理
    │   │   └── env.ts             # 环境配置 store
    │   ├── types/                 # TypeScript 类型定义
    │   │   └── index.ts           # 核心类型接口
    │   ├── data/                  # 静态数据
    │   │   └── templates.ts       # 快捷模板数据
    │   ├── App.vue                # 主应用组件
    │   └── main.ts                # 渲染进程入口
    └── index.html                 # HTML 模板
```

## 数据存储位置

- **配置文件**: `{userData}/profiles.json`
- **.env 文件**: `{userData}/.env`
- **userData 路径**:
  - Windows: `%APPDATA%/SwitchEnv`
  - macOS: `~/Library/Application Support/SwitchEnv`
  - Linux: `~/.config/SwitchEnv`

## 使用流程

### 1. 创建配置
1. 点击左上角"新建配置"按钮
2. 输入配置名称（如：开发环境）
3. 可选：输入描述信息
4. 点击确定

### 2. 添加环境变量
1. 从左侧选择一个配置
2. 点击"添加变量"按钮
3. 在表格中输入变量名和值
4. 自动保存

### 3. 使用模板快速添加
1. 点击"使用模板"按钮
2. 选择一个预设模板
3. 模板中的变量会自动添加到当前配置

### 4. 切换环境
1. 在左侧列表选择要使用的配置
2. 点击"启用"按钮
3. 环境变量会被写入 .env 文件并应用到进程

### 5. 导入现有配置
1. 点击"导入"按钮
2. 选择导入格式（JSON 或 .env）
3. 选择文件
4. 配置会被导入到列表中

### 6. 导出配置
1. 选择要导出的配置
2. 点击"导出"按钮
3. 选择导出格式（JSON 或 .env）
4. 选择保存位置

## 开发命令

```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 类型检查
pnpm typecheck

# 构建应用
pnpm build

# 打包分发版本
pnpm build:win    # Windows
pnpm build:mac    # macOS
pnpm build:linux  # Linux
```

## 注意事项

1. **环境变量应用**: 启用配置后，环境变量会写入 userData 目录下的 .env 文件
2. **数据安全**: 所有配置数据仅存储在本地，不会上传到任何服务器
3. **配置备份**: 建议定期导出重要配置作为备份
4. **删除操作**: 删除配置和变量后无法恢复，请谨慎操作

## 未来计划

- [ ] 配置分组功能
- [ ] 配置搜索和过滤
- [ ] 环境变量加密存储
- [ ] 系统托盘图标和快捷切换
- [ ] 配置导入验证和错误提示优化
- [ ] 支持更多模板
- [ ] 配置版本历史记录
- [ ] 快捷键支持
